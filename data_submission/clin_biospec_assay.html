<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>clin_biospec_assay</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="clin_biospec_assay_files/libs/clipboard/clipboard.min.js"></script>
<script src="clin_biospec_assay_files/libs/quarto-html/quarto.js"></script>
<script src="clin_biospec_assay_files/libs/quarto-html/popper.min.js"></script>
<script src="clin_biospec_assay_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="clin_biospec_assay_files/libs/quarto-html/anchor.min.js"></script>
<link href="clin_biospec_assay_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="clin_biospec_assay_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="clin_biospec_assay_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="clin_biospec_assay_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="clin_biospec_assay_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="submitting-assay-data-and-metadata" class="level1">
<h1>Submitting Assay Data and Metadata</h1>
<p>As stated in <a href="../data_submission/overview.md">Data Submission Overview</a>, data submission involves two key steps: 1. Uploading assay data files to Synapse; and 2. Completing and validating metadata using the Data Curator App (DCA).</p>
<p>This page provides details regarding those steps.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../img/Data_submission.svg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">HTAN Data Submission Process</figcaption>
</figure>
</div>
<p>To submit data, you will also need to understand the HTAN data model and specific requirements for your particular data type. For a general overview of the HTAN data model, please see <a href="../data_model/overview.md">HTAN Data Model</a>. To understand specific requirements for your data type, please see <a href="https://humantumoratlas.org/standards">Data Standards</a>.</p>
<p>HTAN uses the Synapse <a href="https://www.synapse.org">Portal</a> and <a href="https://dca.app.sagebionetworks.org/">DCA</a>, developed and maintained by <a href="https://sagebionetworks.org/">Sage Bionetworks</a>, to manage clinical, biospecimen and assay data submissions (dataset ingress). In order to submit data, your center should:</p>
<ol type="1">
<li><a href="#have-at-least-one-user-with-certified-user-status-on-synapse">Have at least one user with Certified User status on Synapse.</a></li>
<li><a href="#contact-your-data-liaison-to-set-up-your-project-and-cloud-bucket">Contact your Data Liaison to set up your project and cloud bucket.</a></li>
<li><a href="#ensure-the-dataset-conforms-to-the-htan-data-model-uses-htan-identifiers-and-does-not-contain-phi">Ensure the assay dataset conforms to the HTAN Data Model, uses HTAN Identifiers and does not contain Protected Health Information (PHI).</a></li>
<li><a href="#organize-and-upload-your-dataset-to-the-synapse-project">Organize and upload your dataset to the Synapse Project</a></li>
<li><a href="#validate-and-submit-metadata-using-synapses-data-curator-app-dca">Validate and submit metadata using the DCA.</a></li>
</ol>
<p>Please read the rest of this page for more information about each of these steps.</p>
<section id="have-at-least-one-user-with-certified-user-status-on-synapse." class="level2">
<h2 class="anchored" data-anchor-id="have-at-least-one-user-with-certified-user-status-on-synapse.">Have at least one user with Certified User status on Synapse.</h2>
<p>To upload files to the Synapse Platform, you need to be a <a href="https://help.synapse.org/docs/Synapse-User-Account-Types.2007072795.html">Synapse Certified User</a>. Because Synapse stores data from human subjects research, Sage Bionetworks requires that you demonstrate understanding of and compliance with privacy and security issues. You can complete your certification by taking a short certification quiz. Please see the Synapse <a href="https://help.synapse.org/docs/Synapse-User-Account-Types.2007072795.html">Certified User Documentation</a> for more information.</p>
</section>
<section id="contact-your-data-liaison-to-set-up-your-project-and-cloud-bucket." class="level2">
<h2 class="anchored" data-anchor-id="contact-your-data-liaison-to-set-up-your-project-and-cloud-bucket.">Contact your Data Liaison to set up your project and cloud bucket.</h2>
<p>When you are ready to upload data, please contact your <a href="../data_submission/Data_Liaisons.md">data liaison</a>. Your data liaison will need to know: 1. Your centers 2. Who on your team will be doing the data upload. 3. The synapse usernames for team members identified in #2.</p>
<p>Please have users obtain certified user status prior to contacting your data liaison.</p>
<p>With the above information, the DCC will initialize your Synapse project for metadata submission and a cloud storage location for dataset uploads. If the data submission is for a new atlas, the DCC will also create an HTAN atlas ID. Once your Synapse project has been initialized, your data liaison will reach out to you with the location of your Synapse project and you can begin uploading your data.</p>
</section>
<section id="ensure-the-dataset-conforms-to-the-htan-data-model-uses-htan-identifiers-and-does-not-contain-phi." class="level2">
<h2 class="anchored" data-anchor-id="ensure-the-dataset-conforms-to-the-htan-data-model-uses-htan-identifiers-and-does-not-contain-phi.">Ensure the dataset conforms to the HTAN Data Model, uses HTAN Identifiers and does not contain PHI.</h2>
<p>The HTAN Data Model is built upon data standards described on the <a href="https://data.humantumoratlas.org/standards">Data Standards</a> page. All HTAN Centers are required to encode their clinical, biospecimen and assay data and metadata using the HTAN Data Model. If you have a new data type which is not currently represented in the HTAN Data Model, please contact your data liaison.</p>
<p>A concrete way to understand the expectations for data submissions is to view the metadata templates (manifests) for clinical, biospecimen and assay data available in the (<a href="https://dca.app.sagebionetworks.org/">DCA</a>). For any given dataset, you may be submitting:</p>
<ul>
<li>clinical manifest(s), e.g.&nbsp;Demographics, Diagnosis</li>
<li>biospecimen manifest(s)</li>
<li>assay manifest(s), e.g.&nbsp;Bulk RNA-seq level 1</li>
<li>assay data files</li>
</ul>
<p>The first three items will be validated and submitted using the DCA. The last item, assay data files, only needs to be uploaded to the synapse project itself.</p>
<p>All data should be identified using HTAN identifiers. Please see the <a href="../data_model/identifiers.md">HTAN Identifier</a> section of this manual for more information regarding HTAN identifiers.</p>
<p>!!! <em>Please review your data to ensure that it does not contain PHI.</em> !!!</p>
</section>
<section id="organize-and-upload-your-dataset-to-the-synapse-project" class="level2">
<h2 class="anchored" data-anchor-id="organize-and-upload-your-dataset-to-the-synapse-project">Organize and upload your dataset to the Synapse Project</h2>
<p>Please organize your data using the flattened data layout described in Synapse’s <a href="https://dca-docs.scrollhelp.site/DCA/Working-version/HTAN/organize-your-data-upload#OrganizeyourDataUpload-FlattenedDataLayoutExample">Data Ingress Docs</a></p>
<p>Data files can be transferred using the Synapse User Interface (Synapse UI) or programmatically. Please see Synapse’s <a href="https://dca-docs.scrollhelp.site/DCA/Working-version/HTAN/uploading-data">Data Ingress Docs</a> for more information on how to upload files.</p>
<p>!!! If you upload files to Synapse programmatically, please use synapseclient version 3.0.0 or higher. !!!</p>
</section>
<section id="validate-and-submit-metadata-using-synapses-data-curator-app-dca." class="level2">
<h2 class="anchored" data-anchor-id="validate-and-submit-metadata-using-synapses-data-curator-app-dca.">Validate and submit metadata using Synapse’s Data Curator App (DCA).</h2>
<p>The DCA contains HTAN-specific metadata templates which can be completed on the app or downloaded. Once these are completed by your center, they should then be validated and submitted via the DCA.</p>
<p>Please see Synapse’s <a href="https://dca-docs.scrollhelp.site/DCA/Working-version/HTAN/validate-and-submit-your-metadata">Data Ingress Docs</a> for more details regarding the web app.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>